@*<environment include="Development">*@
<script src="~/js/jquery-3.3.1.min.js"></script>
<script src="~/js/bootstrap.min.js"></script>
<script src="~/lib/knockout/knockout-3.5.0.js" asp-append-version="true"></script>
<script src="~/lib/knockout/knockout.validation.min.js" asp-append-version="true"></script>
<script src="~/lib/knockout/knockout.validation-messages.js" asp-append-version="true"></script>
<script src="~/lib/knockout/knockout.mapping-latest.js" asp-append-version="true"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
<script src="~/js/blrmis.lib.js" asp-append-version="true"></script>

<script src="~/js/popper.min.js"></script>
<script src="~/js/fastclick.js"></script>
<script src="~/js/prism.js"></script>


<script type="text/javascript" src="~/js/codemirror.min.js"></script>
<script type="text/javascript" src="~/js/xml.min.js"></script>

<script type="text/javascript" src="~/js/jquery.nicescroll.min.js"></script>
<script type="text/javascript" src="~/js/jquery.nicescroll.min-main.js"></script>
<script type="text/javascript" src="~/js/jquery.nice-select.min.js"></script>
<script type="text/javascript" src="~/lib/moment.js"></script>
<script type="text/javascript" src="~/lib/knockout-date-bindings.js"></script>


@*<script type="text/javascript" src="js/plugins/special_characters.min.js"></script>
    <script type="text/javascript" src="js/plugins/word_paste.min.js"></script>*@

<script type="text/javascript" src="~/js/jquery.main.js"></script>
<script type="text/javascript" src="~/lib/notify.js"></script>
<script type="text/javascript" src="~/lib/jquery.mask.js"></script>
<script type="text/javascript" src="~/js/jquery-ui.js"></script>

@*</environment>*@
@*<environment exclude="Development">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.3.1.min.js"
                asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                asp-fallback-test="window.jQuery"
                crossorigin="anonymous"
                integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT">
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
                asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                crossorigin="anonymous"
                integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd">
        </script>
        <script src="~/js/site.min.js" asp-append-version="true"></script>
    </environment>*@
<script>
    $(function () {

        $(".mainmenu a").each(function (key, value) {

            var ref = $(this).attr('href');
            if (ref != "") {

                if (window.location.pathname.indexOf(ref) > -1 || $(this).hasClass(getRoutesLastSegment())) {

                    if ($(this).closest('.grow').length > 0) {

                        $(this).addClass('active-subnav');
                        $(this).closest('.grow').addClass("active");
                    }
                    else
                        $(this).addClass('activeMenuItem');
                }
            }
            else if (!$(this).parent().hasClass("grow") && isOnHomePage()) {

                $(this).addClass('activeMenuItem');
            }
        });

        function getRoutesLastSegment() {

            var routeValues = ("@(ViewContext.RouteData.Values["Page"])").toLowerCase();
            var routeLength = routeValues.split("/").length;
            var currentPageName = "";
            if (routeLength > 0)
                var currentPageName = routeValues.split("/")[routeLength - 1].toLowerCase();
            return currentPageName;
        }

        function isOnHomePage() {

            var currentRouteName = "@(ViewContext.RouteData.Values["Page"])".toLowerCase();
            if (currentRouteName == "/index" || currentRouteName == "index")
                return true;
            else
                return false;
        }

        //if ($('#accordion .subnav-menu li a.activeMenuItem').length > 0) {
        //    $('#accordion .grow').addClass('active');
        //}

        $(".datepicker").datepicker();

        var loggedinuser = "";
        if (localStorage.getItem("loginusername") != null && localStorage.getItem("loginusername") != undefined) {
            loggedinuser = localStorage.getItem("loginusername");
            $("#loggedinuser").html(loggedinuser);
        }
    });
    $lib.init({ apiBaseUrl: '@ViewBag.apiBaseUrl', appSettings: '@ViewBag.appSettings' });
</script>